<div>
    <a ui-sref="dashboard.users">
        <button type="button" class="btn btn-round btn-default btn-xs">
            <i class="fa fa-arrow-left" aria-hidden="true">
            </i>
            back
        </button>
    </a>
    <ul class="stats-overview">
        <li>
            <span class="name">
                Unprocessed Messages :
            </span>
            <span class="value text-success">
                {{  unproCount}}
            </span>
        </li>
        <li>
            <span class="name">
                Processed Messages :
            </span>
            <span class="value text-success">
                {{ proCount}}
            </span>
        </li>
        <li>
            <button ng-click="parseAllSms()">
                <i class="fa fa-refresh" aria-hidden="true">
                </i>
                Parse All sms
            </button>
        </li>
        <li>
            <!-- ********   START: MODAL     ********* -->
            <!-- <div class="pull-right"> -->
            <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bs-example-modal-sm">
                Check User Details
            </button>
            <div style="display: none;" class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog"
                 aria-hidden="true">
                <div class="modal-dialog modal-sm" style="width:35%">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">
                                        ×
                                    </span>
                            </button>
                            <h4 class="modal-title" id="myModalLabel2">
                                User Details
                            </h4>
                        </div>
                        <div class="modal-body">
                            <dl class="dl-horizontal">
                                <dt style="width:120px">
                                    _id :
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData._id}}
                                </dd>
                                <dt style="width:120px">
                                    PrimaryEmail :
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.primaryEmail}}
                                </dd>
                                <dt style="width:120px">
                                    Device Resolution:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.deviceResolution}}
                                </dd>
                                <dt style="width:120px">
                                    IMEI:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.imei}}
                                </dd>
                                <dt style="width:120px">
                                    Platform :
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.platform}}
                                </dd>
                                <dt style="width:120px">
                                    Platform Version:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.platformVersion}}
                                </dd>
                                <dt style="width:120px">
                                    Primary Network:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.primaryNetwork}}
                                </dd>
                                <dt style="width:120px">
                                    Referal code:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.referralCode}}
                                </dd>
                                <dt style="width:120px">
                                    appVersion :
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.appVersion}}
                                </dd>
                                <dt style="width:120px">
                                    Sms ShortCodes:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.smsShortCodes.length}}
                                </dd>
                                <dt style="width:120px">
                                    Access Time
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.accessTime|date:'medium'}}
                                </dd>
                                <dt style="width:120px">
                                    Date Created:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.dateCreated|date:'medium'}}
                                </dd>
                                <dt style="width:120px">
                                    Manufacturer:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.manufacturer}}
                                </dd>
                                <dt style="width:120px">
                                    Last Login:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.lastLogin |date:'medium'}}
                                </dd>
                                <dt style="width:120px">
                                    latitude:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.latitude}}
                                </dd>
                                <dt style="width:120px">
                                    longitude:
                                </dt>
                                <dd style="margin-left:130px">
                                    {{userData.longitude}}
                                </dd>
                            </dl>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <!-- </div> -->
            <!-- ********   END: MODAL       ********* -->
        </li>
    </ul>
    <uib-alert ng-show="parseSmsResult.output.length" close="closeParseSmsResult()" type="success">
        <div ng-repeat="(key,value) in parseSmsResult.output">
            <div ng-repeat="(key, value) in value">
                {{key}} : {{value}}
            </div>
        </div>
        <a href="" data-toggle="modal" data-target=".bs-example-modal-lg" ng-show="parseSmsResult.smsdata.length">
            <!-- ng-show="parseSmsResult.smsdata.length" -->
            Click here for more details
        </a>
    </uib-alert>
    <!-- modal for smsdata  starts here -->
    <div style="display: none;" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-dialog modal-lg" style="width:90%">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">
                            ×
                        </span>
                    </button>
                    <h4 class="modal-title" id="myModalLabel2">
                        Sms Data
                    </h4>
                </div>
                <div class="modal-body">
                    <!-- modal body goes here -->
                    <div class="row">
                        <div class="col-md-12">

                            <table class="table table-bordered ">
                                <thead>
                                <th>
                                    #
                                </th>
                                <th>
                                    <div href ng-click="order('shortcode')" style="cursor:pointer">
                                        shortcode
                                        <span ng-show="sortType == 'shortcode' && sortReverse" class="fa fa-caret-down">
                                    </span>
                                        <span ng-show="sortType == 'shortcode' && !sortReverse" class="fa fa-caret-up">
                                    </span>
                                    </div>
                                </th>
                                <th>
                                    <div href ng-click="order('smstext')" style="cursor:pointer">
                                        sms text
                                        <span ng-show="sortType == 'smstext' && sortReverse" class="fa fa-caret-down">
                                    </span>
                                        <span ng-show="sortType == 'smstext' && !sortReverse" class="fa fa-caret-up">
                                    </span>
                                    </div>
                                </th>
                                <th>
                                    Pattern
                                </th>
                                <th>
                                    <div ng-click="order('dateModified')" style="cursor:pointer">
                                        Regex Modified Date
                                        <span ng-show="sortType == 'dateModified' && sortReverse"
                                              class="fa fa-caret-down">
                                    </span>
                                        <span ng-show="sortType == 'dateModified' && !sortReverse"
                                              class="fa fa-caret-up">
                                    </span>
                                    </div>
                                </th>
                                <th>
                                    <div ng-click="order('savetime')" style="cursor:pointer">
                                        Msg Save Time
                                        <span ng-show="sortType == 'savetime' && sortReverse" class="fa fa-caret-down">
                                    </span>
                                        <span ng-show="sortType == 'savetime' && !sortReverse" class="fa fa-caret-up">
                                    </span>
                                    </div>
                                </th>
                                </thead>
                                <tbody>
                                <tr ng-repeat="sms in  parseSmsResult.smsdata |orderBy:sortType:sortReverse">
                                    <td>
                                        {{$index+1}}
                                    </td>
                                    <td>
                                        {{sms.shortcode}}
                                    </td>
                                    <td>
                                        {{sms.smstext }}
                                    </td>
                                    <td>
                                        {{sms.pattern }}
                                    </td>
                                    <td>
                                        {{sms.dateModified |date:'MMM d, y h:mm a'}}
                                    </td>
                                    <td>
                                        {{sms.savetime |date:'MMM d, y h:mm a'}}
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        Close
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- modal for smsdata ends here -->
    <div class="row">
        <div class="col-md-12 col-xs-12 col-lg-12">
            <div class="x_panel">
                <div class="x_content">
                    <div class="" role="tabpanel" data-example-id="togglable-tabs">
                        <!-- start:  tabs -->
                        <ul id="myTab" class="nav nav-tabs bar_tabs" role="tablist">
                            <li role="presentation" class="active">
                                <a href="userDetail.html#tab_content1" id="un_proc-tab" role="tab" data-toggle="tab"
                                   aria-expanded="true">
                                    <span class="badge bg-green">
                                        {{unproc.length}}
                                    </span>
                                    Unprocessed Shortcode
                                </a>
                            </li>
                            <li role="presentation" class="">
                                <a href="userDetail.html#tab_content2" role="tab" id="new-tab" data-toggle="tab"
                                   aria-expanded="false" ng-click="check('new')">
                                    <span class="badge bg-green">
                                        {{new.length}}
                                    </span>
                                    New Shortcode
                                </a>
                            </li>
                            <li role="presentation" class="">
                                <a href="userDetail.html#tab_content3" role="tab" id="proc-tab" data-toggle="tab"
                                   aria-expanded="false" ng-click="check('proc')">
                                    <span class="badge bg-green">
                                        {{proc.length}}
                                    </span>
                                    Processed Shortcode
                                </a>
                            </li>
                        </ul>
                        <!-- END: tabs -->
                        <div id="myTabContent" class="tab-content">
                            <!-- tab content 1 :unprocessed -->
                            <div role="tabpanel" class="tab-pane fade active in" id="tab_content1"
                                 aria-labelledby="un_proc-tab">
                                <div class="row">
                                    <!-- left section : UNPROCESSED -->
                                    <div class="col-md-2 col-sm-2 mail_list_column">
                                        <input ng-model="searchText_unproc" style="width:100%;margin-bottom:1rem"
                                               placeholder="search code"/>
                                        <div style="overflow:auto;height: 500px;">
                                            <a href="" ng-repeat="code in unproc |filter:searchText_unproc">
                                                <div class="mail_list">
                                                    <span class="">  {{code.count}}</span>

                                                    <div class="right">
                                                        <h3 ng-click="getSms(code._id,0,'unproc')">
                                                            {{code._id}}
                                                        </h3>
                                                    </div>
                                                    <small>
                                                        <button ng-click="parseSms(code._id)" type="button"
                                                                class="btn btn-default btn-xs">
                                                            <i class="fa fa-refresh" aria-hidden="true">
                                                            </i>
                                                        </button>
                                                    </small>

                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                    <!-- unprocessed message detail -->
                                    <div class="col-md-10 col-sm-10 mail_view" ng-show="sms_unproc.length">
                                        <div class="col-xs-2">
                                            <h4>
                                                {{code_unproc}}
                                            </h4>
                                        </div>
                                        <div class="col-md-4 col-md-offset-6 pull-right">
                                            <label>

                                                <input type="hidden" ng-model="assignTo" value="{{selected}}"/>
                                                <select id="cat_select" class="form-control" tabindex="-1"
                                                        ng-model="assignTo" select2
                                                        ng-options="x.name for x in modusers" placeholder="Assign To"
                                                        style="width:150px">
                                                    <option value="">
                                                    </option>
                                                </select>
                                                <button type="button" class="btn btn-info btn-sm"
                                                        ng-click="assign('unproc')">
                                                            <span class="glyphicon glyphicon-ok">
                                                            </span>
                                                    Submit
                                                </button>
                                            </label>
                                        </div>
                                        <table class="table table-striped jambo_table">
                                            <thead>
                                            <th>
                                                <input type="checkbox" id="check-all" class="flat"
                                                       ng-model="selected.all"/>
                                            </th>
                                            <th>
                                                <div href ng-click="order('text')" style="cursor:pointer">
                                                    Text
                                                    <span ng-show="sortType == 'text' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'text' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                    <button type="button" class="btn btn-default btn-xs pull-right"
                                                            ng-click="moveToDump()">
                                                        Move to Dump
                                                    </button>
                                                </div>
                                            </th>
                                            <th width="20%">
                                                <div ng-click="order('time')" style="cursor:pointer">
                                                    Msg Time
                                                    <span ng-show="sortType == 'time' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'time' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            <th width="20%">
                                                <div ng-click="order('saveTime')" style="cursor:pointer">
                                                    Save Time
                                                    <span ng-show="sortType == 'saveTime' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'saveTime' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="sms in sms_unproc |orderBy:sortType:sortReverse">
                                                <td class="a-center ">
                                                    <input type="checkbox" class="flat" name="assign"
                                                           value="{{sms.text}}" ng-checked="selected.all"/>
                                                </td>
                                                <td>
                                                    {{sms.text}}
                                                </td>
                                                <td>
                                                    {{sms.time }}
                                                </td>
                                                <td>
                                                    {{sms.saveTime |date:'MMM d, y h:mm a'}}
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>



                            <!-- tab content 2 :new -->
                            <div role="tabpanel" class="tab-pane fade " id="tab_content2" aria-labelledby="new-tab">
                                <div class="row">
                                    <!--left section:new-->
                                    <div class="col-md-2 col-sm-2 mail_list_column">
                                        <input ng-model="searchText_new" style="width:100%;margin-bottom:1rem"
                                               placeholder="search code"/>
                                        <div style="overflow:auto;height: 500px;">
                                            <a href="javascript:void(0)" ng-repeat="code in new |filter:searchText_new">
                                                <div class="mail_list">
                                                    <span class="">  {{code.count}}</span>

                                                    <div class="left">
                                                        <input type="checkbox" value="{{code._id}}" name="blacklist"/>
                                                    </div>
                                                    <div class="right">
                                                        <h3 ng-click="getSms(code._id,0,'new')">
                                                            {{code._id}}
                                                        </h3>
                                                    </div>
                                                    <small>
                                                        <button ng-click="parseSms(code._id)" type="button"
                                                                class="btn btn-default btn-xs">
                                                            <i class="fa fa-refresh" aria-hidden="true">
                                                            </i>
                                                        </button>
                                                    </small>

                                                </div>
                                            </a>
                                        </div>
                                        <button type="button" class="btn btn-dark pull-right" ng-click="blacklist()">
                                            Blacklist
                                        </button>
                                    </div>
                                    <!--right section: new-->
                                    <div class="col-md-10 col-sm-10 mail_view" ng-show="sms_new.length" >
                                        <div class="col-xs-2">
                                            <h4>
                                                {{code_new}}
                                            </h4>
                                        </div>
                                        <div class="col-md-4 col-md-offset-6 ">
                                            <label>

                                                <input type="hidden" ng-model="assignTo" value="{{selected}}"/>
                                                <select id="cat_select" class="form-control" tabindex="-1"
                                                        ng-model="assignTo" select2
                                                        ng-options="x.name for x in modusers" placeholder="Assign To"
                                                        style="width:150px">
                                                    <option value="">
                                                    </option>
                                                </select>
                                                <button type="button" class="btn btn-info btn-sm" ng-click="assign('new')">
                                                            <span class="glyphicon glyphicon-ok">
                                                            </span>
                                                    Submit
                                                </button>
                                            </label>
                                        </div>
                                        <!-- new message detail -->
                                        <table class="table table-striped jambo_table ">
                                            <thead>
                                            <th>
                                                <input type="checkbox" id="check-all" class="flat"
                                                       ng-model="selected.all"/>
                                            </th>
                                            <th>
                                                <div href ng-click="order('text')" style="cursor:pointer">
                                                    Text
                                                    <span ng-show="sortType == 'text' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'text' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            <th width="20%">
                                                <div ng-click="order('time')" style="cursor:pointer">
                                                    Msg Time
                                                    <span ng-show="sortType == 'time' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'time' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            <th width="20%">
                                                <div ng-click="order('saveTime')" style="cursor:pointer">
                                                    Save Time
                                                    <span ng-show="sortType == 'saveTime' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'saveTime' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="sms in sms_new |orderBy:sortType:sortReverse">
                                                <td class="a-center ">
                                                    <input type="checkbox" class="flat" name="assign"
                                                           value="{{sms.text}}" ng-checked="selected.all"/>
                                                </td>
                                                <td>
                                                    {{sms.text}}
                                                </td>
                                                <td>
                                                    {{sms.time |date:'medium'}}
                                                </td>
                                                <td>
                                                    {{sms.saveTime |date:'MMM d, y h:mm a'}}
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <!-- tab content 3:processed -->
                            <div role="tabpanel" class="tab-pane fade " id="tab_content3" aria-labelledby="proc-tab">
                                <div class="row">
                                    <!--left section:processed-->
                                    <div class="col-md-2 col-sm-2 mail_list_column">
                                        <div style="overflow:auto;height: 500px;">
                                            <input ng-model="searchText_proc" style="width:100%;margin-bottom:1rem"
                                                   placeholder="search code"/>
                                            <a href="" ng-repeat="code in proc |filter:searchText_proc">
                                                <div class="mail_list">
                                                    <span class="">  {{code.count}}</span>

                                                    <div class="left">
                                                        <!-- <input type="checkbox" value="{{code}}" name="blacklist" /> -->
                                                    </div>
                                                    <div class="right">
                                                        <h3 ng-click="getSms(code._id,3,'proc')">
                                                            {{code._id}}
                                                        </h3>
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                    </div>
                                    <!--right section:processed-->
                                    <div class="col-md-10 col-sm-10 mail_view" ng-show="sms_proc.length">
                                        <h4>
                                            {{code_proc}}
                                        </h4>
                                        <!-- unprocessed message detail -->
                                        <table class="table table-striped jambo_table ">
                                            <thead>
                                            <th>
                                                #
                                            </th>
                                            <th>
                                                <div href ng-click="order('text')" style="cursor:pointer">
                                                    Text
                                                    <span ng-show="sortType == 'text' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'text' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            <th width="20%">
                                                <div ng-click="order('time')" style="cursor:pointer">
                                                    Msg Time
                                                    <span ng-show="sortType == 'time' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'time' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            <th width="20%">
                                                <div ng-click="order('saveTime')" style="cursor:pointer">
                                                    Save Time
                                                    <span ng-show="sortType == 'saveTime' && sortReverse"
                                                          class="fa fa-caret-down">
                                                        </span>
                                                    <span ng-show="sortType == 'saveTime' && !sortReverse"
                                                          class="fa fa-caret-up">
                                                        </span>
                                                </div>
                                            </th>
                                            </thead>
                                            <tbody>
                                            <tr ng-repeat="sms in sms_proc |orderBy:sortType:sortReverse">
                                                <td>
                                                    {{$index+1}}.
                                                </td>
                                                <td>
                                                    {{sms.text}}
                                                </td>
                                                <td>
                                                    {{sms.time |date:'medium'}}
                                                </td>
                                                <td>
                                                    {{sms.saveTime |date:'MMM d, y h:mm a'}}
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div aria-role="alertdialog" aria-live="assertive"
         style="position: fixed; width: 300px; right: 36px; top: 36px; cursor: auto;"
         class="ui-pnotify dark ui-pnotify-fade-normal ui-pnotify-in ui-pnotify-fade-in ui-pnotify-move"
         ng-show="alert">
        <div style="min-height: 16px;" role="alert" class="alert ui-pnotify-container alert-info ui-pnotify-shadow">
            <div style="cursor: pointer; " title="Close" tabindex="0" aria-role="button"
                 class="ui-pnotify-closer pull-right">
                <span class="glyphicon glyphicon-remove" ng-click="closeAlert()">
                </span>
            </div>
            <div aria-role="alert" class="ui-pnotify-text" dismiss-on-timeout="5000"
                 ng-hide="parseSmsResult.output.length">
                <!-- <img src="assets/images/ajax-loader.gif"/> -->
                {{alert}}
            </div>

        </div>
    </div>
    <back-top scroll-speed=1500 button-theme="dark">
        <i class="fa fa-angle-double-up">
        </i>
        Scroll Top
    </back-top>
</div>
