"use strict";angular.module("sbAdminApp",["angularUtils.directives.dirPagination"]).controller("assignedMessagesCtrl",function($scope,$http,$compile,$filter,api,$window,$cookieStore){var token=$cookieStore.get("c2cCookie"),url=api.addr();$scope.alert="",$scope.assignedTexts=[],$scope.pageno=1,$scope.total_count=0,$scope.itemsPerPage=100,$scope.currentPage=1,$scope.assignedMsgData={},$scope.sortBy="saveTime",$scope.sortReverse=!1,$scope.assignedTextsList=function(pageno){var searchParams=angular.isUndefined($scope.searchStr)?"":$scope.searchStr,req={method:"get",url:url+"get-all-assigned-messages/"+$scope.itemsPerPage+"/"+pageno,headers:{Authorization:$cookieStore.get("c2cCookie")},params:{searchParams:searchParams,sortBy:$scope.sortBy,sortOrder:$scope.sortReverse?1:-1}};$http(req).success(function(response){$scope.assignedTexts=response.data,$scope.total_count=response.total_count,$scope.currentPage=pageno}),$scope.pageno=pageno},$scope.assignedTextsList($scope.pageno),$scope.assignedMessagesCountByTheirStatus=function(){api.get("get-status-count-by-assigned-to",!1,token,{},function(err,response){err?$scope.alert=response.error:$scope.assignedMsgData=response.assigneeData})},$scope.assignedMessagesCountByTheirStatus(),$scope.order=function(sortBy){$scope.sortReverse=$scope.sortBy===sortBy&&!$scope.sortReverse,$scope.sortBy=sortBy;var searchParams=angular.isUndefined($scope.searchStr)?"":$scope.searchStr,req={method:"get",url:url+"get-all-assigned-messages/"+$scope.itemsPerPage+"/"+$scope.pageno,headers:{Authorization:$cookieStore.get("c2cCookie")},params:{searchParams:searchParams,sortBy:$scope.sortBy,sortOrder:$scope.sortReverse?1:-1}};$http(req).success(function(response){$scope.assignedTexts=response.data,$scope.total_count=response.total_count,$scope.currentPage=$scope.pageno})}});