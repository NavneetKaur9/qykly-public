"use strict";angular.module("sbAdminApp").controller("countCtrl",function($scope,$http){function getShortcodes(){$scope.count={processing:[],"new":[],blacklist:[]},$scope.codeCount=[],$http.get("api/count/shortcode").then(function(response){$scope.codeCount=response.data.data,$scope.lastUpdated=response.data.data[0].updatedOn,console.log($scope.lastUpdated),angular.forEach($scope.codeCount,function(value,key){0===value.count?$scope.count["new"].push(value):-1===value.count?$scope.count.blacklist.push(value):$scope.count.processing.push(value)})},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]})}$scope.matchedData=[],$scope.count={processing:[],"new":[],blacklist:[]},getShortcodes(),$scope.refresh=function(){function updateregex(){$http.get("api/updateregex/counter").then(function(response){updateblacklisted()},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]})}function updateblacklisted(){$http.get("api/updateblacklisted/counter").then(function(response){updatenewmessage()},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]})}function updatenewmessage(){$http.get("api/updatenewmessage/counter").then(function(response){getShortcodes()},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]})}$http["delete"]("api/delete/counter").then(function(response){updateregex()},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]})},$scope.autoData=function(){""===$scope.autodata?$scope.matchedData=[]:$http.post("api/Autocorrect/Count",{text:$scope.autodata}).then(function(response){$scope.matchedData=response.data.data},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]})},$scope.sortBy=function(sortValue){console.log(sortValue),$scope.sort=sortValue},$scope.orderBy=function(sortValue){console.log(sortValue),$scope.order=sortValue}});