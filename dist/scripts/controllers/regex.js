"use strict";angular.module("sbAdminApp").controller("regexCtrl",function($scope,$position,$http){$scope.alerts=[],$scope.closeAlert=function(index){$scope.alerts.splice(index,1)},$http.get("api/categories").then(function(response){$scope.categories=response.data.data},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]}),$scope.currentPage=1,$scope.pageSize=20,$scope.showLoading=!1,$scope.showUnprocess=!1,$scope.show=function(){$scope.showUnprocess=!0},$scope.loadShortCodes=function(category){$scope.category=category,$scope.showLoadingOfShortCodes=!0,$http.post("api/regex/count",{category:$scope.category}).then(function(response){$scope.showLoadingOfShortCodes=!1,$scope.counts=response.data.data},function(response){$scope.showLoadingOfShortCodes=!1})},$scope.main={page:1},$scope.prevCategory=" ",$scope.loadRegex=function(category){function call(category){$scope.category=category,$scope.prevCategory=category,$scope.showLoading=!0,$http.post("api/regex",{category:category,skip:$scope.main.page}).then(function(response){0===response.data.data?($scope.showLoading=!1,$scope.msg="No data"):($scope.showLoading=!1,$scope.regex=response.data.data)},function(response){})}category===$scope.prevCategory?call(category):($scope.main.page=1,call(category),$scope.loadShortCodes(category))},$scope.nextPage=function(){$scope.main.page++,$scope.loadRegex($scope.category)},$scope.previousPage=function(){$scope.main.page--,$scope.loadRegex($scope.category)},$scope.autoData=function(){""===$scope.autodata?$scope.regexMatched=[]:($scope.regexMatched=[],$http.post("api/Autocorrect/regex",{text:$scope.autodata}).then(function(response){$scope.regexMatched=response.data.data},function(response){$scope.alerts=[{msg:response.data.userMessage||"Server error! Are you connected to the internet?.",type:"error"}]}))},$scope.sortType="address",$scope.sortReverse=!1,$scope.order=function(sortType){$scope.sortReverse=$scope.sortType===sortType?!$scope.sortReverse:!1,$scope.sortType=sortType}});